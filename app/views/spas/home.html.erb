<div class="banner mb-3">
  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
    <% if @spas.any? %>
      <% @spas.first(5).each_with_index do |spa, index| %>
        <% if spa.images.attached? %>
          <div class="carousel-item <%= 'active' if index.zero? %>" style="background-image: url(<%= url_for(spa.images.first) %>);">
            <div class="carousel-caption d-none d-md-block">
              <h5><%= spa.name %></h5>
              <p><%= spa.address %></p>
              <%= link_to 'Book Now', new_spa_booking_path(spa), class: 'btn default-btn' %>
            </div>
          </div>
        <% else %>
          <div class="carousel-item <%= 'active' if index.zero? %>">
            <p>No image for this spa</p>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <p>No spas found</p>
    <% end %>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
  <div class="banner-content p-5 text-center">
    <h2>Anywhere, Around the World</h2>
    <p class="fst-italic mt-4"> Discover experiences </p>
    <%= link_to 'Become a Host', new_spa_path, class:"default-btn btn text-dark " %>
  </div>
</div>

<div class="row">
  <div class="p-3 d-flex flex-column col-4" data-controller="toggle-create-spa-form">
    <button class="btn default-btn mx-auto mb-4" data-action="click->toggle-create-spa-form#fire">Open your Spa</button>

    <div class="registration-form w-75 mt-2 mb-3 p-4 d-none" data-toggle-create-spa-form-target="spa_form">
      <%= simple_form_for @spa, html: { multipart: true } do |f| %>
        <div class="form-group mt-3">
          <%= f.input_field :name, label: false, placeholder: 'The Name of your Spa', class: "form-control" %>
        </div>

        <div class="form-group">
          <%= f.input_field :address, label: false, placeholder: 'The Address', class: "form-control" %>
        </div>

        <div class="form-group">
          <%= f.input_field :price, label: false, placeholder: 'Add a Price per session/day', class: "form-control" %>
        </div>

        <div class="form-group">
          <%= f.input_field :rating, label: false, placeholder: 'How many stars?', class: "form-control" %>
        </div>

        <div class="form-group">
          <%= f.input :images, as: :file, input_html: { multiple: true }, label: false, placeholder: 'Add Photos' %>
        </div>

        <div class="form-group d-flex justify-content-center mb-5">
          <%= f.button :submit, class: 'btn default-btn' %>
        </div>
      <% end %>
    </div>
  </div>

  <%= turbo_frame_tag 'spas', class: "d-flex p-3 col-8 row " do %>
      <h3 id="explore-title" class="text-center w-100"> Explore </h3>
    <% @spas.each do |spa| %>
      <div class="col-4 card m-1 item-animate">
        <div id="carouselExampleIndicators<%= spa.id %>" class="carousel slide carousel-fade" data-bs-ride="carousel">
          <div class="carousel-inner">
            <% if spa.images.attached? %>
              <% spa.images.each_with_index do |image, index| %>
                <div class="carousel-item <%= 'active' if index.zero? %>">
                  <%= image_tag image, class: 'd-block w-100' %>
                </div>
             <% end %>
            <% else %>
              <div class="carousel-item active">
                <div class="card-img" style="background-image: url(https://media.timeout.com/images/105596637/image.jpg)"></div>
              </div>
            <% end %>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators<%= spa.id %>" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators<%= spa.id %>" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
        <div class="card-info">
          <p class="text-title"><%= spa.name %></p>
          <div class="card-location">
            <i class="fa-solid fa-location-pin" style="color: #000000;"></i> <p class="text-body"><%= spa.address %></p>
          </div>
        </div>
        <div class="card-footer">
          <span class="text-title">$<%= spa.price %> / day</span>
          <div class="card-button">
            <%= spa.rating %>  <i class="fa-solid fa-star" style="color: #ffea00;"></i>
          </div>
      <%= link_to "Create a booking", new_spa_booking_path(spa) %>
      </div>
      </div>
    <% end %>
  <% end %>
